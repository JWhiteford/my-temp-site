.cd-image-block {
  position: relative;

  &::before {
    /* this is the layer used to cover the .cd-image-block when the content block becomes visible - mobile only */
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    // background-color: rgba($color-1, .6);

    opacity: 0;
    visibility: hidden;
    transition: opacity .3s 0s, visibility 0s .3s;
  }

  &.content-block-is-visible::before  {
    opacity: 1;
    visibility: visible;
    transition: opacity .3s 0s, visibility 0s 0s;
  }

  @include MQ(M) {
    visibility: hidden;

    &::before {
      display: none;
    }
  }
}

.cd-images-list {

  &::before {
    /* never visible - this is used in jQuery to check the current MQ */
    content: 'mobile';
    display: none;
  }

  > li {
    height: 250px;
    list-style: none;
    // background: $color-3 url(../img/img-1.jpg) no-repeat center center;
    // background-size: cover;

    &:nth-of-type(2) {
      // background: $color-1 url(../img/img-2.jpg) no-repeat center center;
      // background-size: cover;
    }

    &:nth-of-type(3) {
      // background: $color-2 url(../img/img-3.jpg) no-repeat center center;
      // background-size: cover;
    }

    &:nth-of-type(4) {
      // background: $color-4 url(../img/img-4.jpg) no-repeat center center;
      // background-size: cover;
    }
  }

  > li > a {
    /* used to vertically align the h2 child -  mobile version only */
    display: table;

    height: 100%;
    width: 100%;
  }

  h2 {
    /* used to vertically align h2 -  mobile version only */
    display: table-cell;
    vertical-align: middle;

    text-align: center;
    // font-size: 3rem;
    // color: $color-5;
    // font-weight: 700;
  }

  @include MQ(M) {

    &::before {
      /* never visible - this is used in jQuery to check the current MQ */
      content: 'desktop';
    }

    > li > a {
      display: block;
      padding: 4em 3em;

      cursor: default;
      pointer-events: none;
    }

    h2 {
      // font-size: 5.5rem;
      text-align: left;
    }
  }
}

/* --------------------------------

Content block

-------------------------------- */

.cd-content-block {
  /* move the block outside the viewport (to the right) - mobile only */
  position: fixed;
  z-index: 1;
  top: 0;
  left: 0;
  height: 100%;
  transform: translateX(100%);
  transition: transform .3s;

  &.is-visible {
    transform: translateX(0);
  }

  > ul {
    height: 100%;
  }

  > ul > li {
    position: absolute;
    height: 100%;
    padding: 2em;
    overflow-y: scroll;
    background-color: $color-5;
    opacity: 0;
    visibility: hidden;

    &.is-selected {
      /* this is the selected content */
      position: relative;
      opacity: 1;
      visibility: visible;
      -webkit-overflow-scrolling: touch;
      background: $body-color;
    }
  }

  h2 {
    line-height: 1.2;
    font-weight: 700;
    font-size: 2.3rem;
    margin: 0;
    margin-bottom: 1em;
  }

  p {
    margin-bottom: 2em;
    line-height: 1.6;
    color: tint($color-1, 40%);
  }

  .cd-close {
    /* 'X' icon to close the content block -  mobile only */
    position: fixed;
    top: 0;
    right: 0;
    height: 44px;
    width: 44px;

    /* image replacement */
    overflow: hidden;
    text-indent: 100%;
    white-space: nowrap;
    color: transparent;

    transform: scale(0);
    transition: transform .2s;

    &::after, &::before {
      /* these are the 2 lines of the 'X' icon */
      content: '';
      position: absolute;
      left: 50%;
      top: 50%;
      width: 2px;
      height: 24px;
      background-color: $color-1;

      /* Force Hardware Acceleration */
      backface-visibility: hidden;
      transform: translateZ(0);
    }

    &::after {
      transform: translateX(-50%) translateY(-50%) rotate(45deg);
    }

    &::before {
      transform: translateX(-50%) translateY(-50%) rotate(-45deg);
    }

    &.is-scaled-up {
      transform: scale(1);

      .no-touch &:hover {
        transform: scale(1.2);
      }
    }
  }

  @include MQ(M) {
    /* reset style */
    position: static;
    transform: translateX(0);

    > ul > li {
      /* reset style */
      opacity: 1;
      visibility: visible;

      padding: 4em 3em;

      &.overflow-hidden {
        /* this class is used during the animation (slider change) to hide the scrolling bar */
        overflow: hidden;
      }
    }

    h2 {
      font-size: 3rem;
    }

    .cd-close {
      display: none;
    }
  }
}

/* ----------------------------------------------

Desktop slider - both image and content blocks

---------------------------------------------- */

@include MQ(M) {

  .cd-image-block,
  .cd-content-block {
    /* slider style - desktop version only */
    width: 100%;
    height: 100vh;
    overflow: hidden;

    > ul {
      position: relative;
      height: 100%;
      margin: 0;
      padding: 0;
    }

    > ul > li {
      position: absolute;
      top: 0;
      left: 0;
      height: 100%;
      width: 100%;
      margin: 0;
      padding: 0;

      /* Force Hardware Acceleration */
      transform: translateZ(0);
      backface-visibility: hidden;
      will-change: transform;

      /* by default, the items are moved to the right - relative to their parent elements */
      transform: translateX(100%);
      transition: transform .5s;

      &.is-selected {
        /* this is the visible item */
        position: absolute;
        transform: translateX(0);
      }

      &.move-left {
        /* this is the item hidden on the left */
        transform: translateX(-100%);
      }
    }
  }
}

/* --------------------------------

Slider navigation

-------------------------------- */

.block-navigation {
  /* this is the slider navigation - desktop version only */
  display: none;

  @include MQ(M) {
    display: block;
    position: fixed;
    bottom: $body-padding;
    left: $body-padding;
    width: calc(50% - #{$body-padding});
    padding: 0;
    margin: 0;
    list-style: none;
    @include clearfix;

    li {
      width: 50%;
      height: 50px;
      line-height: 50px;
      text-align: center;
      background-color: rgba($color-1, .5);
      transition: background .2s;

      &:hover {
        background-color: rgba($color-1, .7);
      }
    }

    li:first-of-type {
      float: left;
    }

    li:last-of-type {
      float: right;
    }

    button {
      display: block;
      height: 100%;
      width: 100%;
      color: $color-5;
      border: none;
      border-top: 2px solid $color-1;
      background: transparent;
      cursor: pointer;

      &.inactive {
        opacity: .3;
        cursor: not-allowed;
      }
      &:hover:not(.inactive) {
        background: $color-1;
        opacity: 1;
        border-top-color: rgba($white, .5);
      }
      &:focus {
        outline: none;
        box-shadow: none;
      }
    }
  }
}

/* --------------------------------

Javascript disabled

-------------------------------- */
@include MQ(M) {
  .no-js .cd-content-block {
    display: none;
  }

  .no-js .cd-image-block {
    width: 100%;
    overflow: visible;
  }

  .no-js .cd-images-list {
    @include clearfix;
  }

  .no-js .cd-images-list > li {
    position: static;
    @include column(.5);
    height: 400px;
    transform: translateX(0);

    &.is-selected {
      position: static;
    }
  }

  .no-js .cd-images-list > li > a {
    cursor: pointer;
    pointer-events: auto;
  }

  .no-js .block-navigation {
    display: none;
  }
}